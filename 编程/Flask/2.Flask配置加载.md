# 程序加载配置

在 Flask 程序运行的时候，可以给 Flask 设置相关配置，比如：配置 Debug 模式，配置数据库连接地址等等，设置 Flask 配置有以下三种方式：

1. 从配置对象中加载(常用)
   `app.config.from_object()`
   
2. 从配置文件中加载
   `app.config.from_pyfile()`
   
3. 从环境变量中加载(了解)
   `app.config.from_envvar()`
   
	> 以下演练以设置应用程序的 DEBUG(调试模式) 为例，设置应用为调式模式这后，可以实现以下功能：
	> 	程序代码修改后可以自动重启服务器
	> 	在服务器出现相关错误的时候可以直接将错误信息进行抛出到控制台打印

## 使用方式

##### 1. 从配置对象中加载，创建配置的类

配置对象，里面定义需要给 APP 添加的一系列配置

```python 
class Config(object):
  '''
  所有的配置项目都需要大写
  '''
  SECRET_KEY=	"sdfadsfaskdfoiquwrei"
  DEBUG = True
  
#	设置配置类
app.config.from_object(Config)
# 读取 打印
@app.route("/")
def index():
    print(app.config['SECRET_KEY'])
    return "Hello world!"
```

##### 2. 从配置文件中加载配置
`app.config.from_pyfile('config.py')`

##### 3. 环境变量(了解)

```shell
export 变量名=变量值
echo $变量名
```

`app.config.from_envvar('FLASKCONFIG')`
读取配置`app.config.get()`
在视图函数中使用 `current_app.config.get()`

##### 4. app.run的参数

可以指定运行的主机IP地址，端口，是否开启调试模式

  `app.run(host="0.0.0.0", port=5000, debug = True)`

## 新式的Flask运行方式

```sh
(venv) ➜  Flask export FLASK_APP=HelloWorld
(venv) ➜  Flask flask run
 * Serving Flask app 'HelloWorld' (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)                                                                                                                                   (venv) ➜  Flask export FLASK_ENV=development 
(venv) ➜  Flask flask run
 * Serving Flask app 'HelloWorld' (lazy loading)
 * Environment: development
 * Debug mode: on
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 698-047-949
```

